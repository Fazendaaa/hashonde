# CDs parados = seu próprio Spotify de graça

foto de capa: ["Vinile"](https://www.flickr.com/photos/62839495@N06/8220701219) by [OZKY_23](https://www.flickr.com/photos/62839495@N06) is licensed under [CC BY-SA 2.0](https://creativecommons.org/licenses/by-sa/2.0/?ref=ccsearch&atype=rich)

> Do you remember the 21st night of September?

30% é muito? 15% também é muito? Ano passado o Spotify começou a questionar essas taxas praticadas pela Apple em sua loja, uma vez que tempos depois a Apple acabou por lançar um produto concorrente -- o Apple Music -- pelo mesmo valor que o Spotify seria se não tivesse que pagar os 30% o serviço poderia custar o mesmo preço que o Music.

Mesmo que as taxas não sejam o probelma para você, aqui vão alguns cenários:

- Já pensou uma maneira fácil de poder mostrar para os seus amigos àquela banda que você comprou o CD na rua? Principalmente sem ter que ficar pirateando o CD ou até mesmo correr o risco de arranhar a master
- Caso goste de bandas antigas e que não são mainstream, que não produziram nada na era digital e você ainda tem os LPs deles, pode ser queira ouvir eles enquanto trabalha sem ter que tirar a "bolacha" da estante
- Ou até mesmo se você for um produtor independente de músicas e gostaria de ter um player só com as suas músicas em uma plataforma na qual você controla tudo, sem censura ou algoritmos para jogar o seu conteúdo em um limbo.

Assim como a ideia de uma internet descentralizada e distribuida visa empoderar o usuário, os serviços construídos com base nessa ideia acabam herdando partes dessa filosofia. E um deles é o [koel](https://koel.dev/) que, como no seu próprio site deixa claro, se trata de um: *"serviço pessoal de streaming de música"*.

![13836055233_c113e45cde_o.jpg](https://cdn.hashnode.com/res/hashnode/image/upload/v1598265917348/1cAnjDyIH.jpeg)

["Carnaby Records (Liège)"](https://www.flickr.com/photos/88133570@N00/13836055233) by [Marc Wathieu](https://www.flickr.com/photos/88133570@N00) is licensed under [CC BY 2.0](https://creativecommons.org/licenses/by/2.0/?ref=ccsearch&atype=rich)

## Intro

A praticidade de ter milhares ou até mesmo milhões de músicas a sua disponibilidade por um preço fixo por mês cativa muitos, ainda mais depois que serviços como o RapidShare, Megaupload, Napster, entre outros terem desaparecidos. Mesmo após alguns procurarem se legalizar, algumas pessoas acreditam que com oferta de serviços como Spotify, Netflix e Crunchyroll -- este último tendo uma origem ilegal -- ajudaram a diminuir demanda por serviços de origem no mínimo questionavel legalmente dependendo do país.

Antes de tudo, alguns dos serviços apresentados como o Spotify e o Deezer possuem opções gratuitas, mas caso você queira pagar por eles, os preços de alguns dos seus planos são:

- Spotify Premium: R$ 16,90
- Apple Music: R$: 16,90
- Deezer Premium: R$ 16,90
- YouTube Music: R$: 16,90

Até parece um cartel, né? Ahhh, tem outro que foge desta cartela:

- Amazon Music: R$: 9,90

Cso seja uma pessoa que não ouça muitos títulos novos e/ou que não fuja daquela playlist tradicional, pode acabar economizando por volta de 200 reais por ano caso cancele a assinatura de um deles.

A ideia não é que você simplesmente *pare* de pagar, coloque um  adblock direto no seu modem para dificultar propagandas para tudo que se conecta à internet como mostrado [aqui](https://fazenda.hashnode.dev/nao-e-so-o-ad-blocker-que-vai-te-salvar) e esquecer de pagar qualquer coisa e usufruir os mesmos benefícios. Mas sim apelar para um público que provavelmente já possuí boa parte do conteúdo que gostaria de consumir parado em mídias nas quais saíram de seu consumo diário como CDs ou vinil -- ou até mesmo àquele CD que apoiou em algum side de crowndfunding e tem que baixar toda vez que quer ouvir porque nunca lembra em que pasta salvou.

Outras saídas para consumir ainda conteúdos recentes e/ou pontuais é ouvir eles através de contas gratuitas desses sistemas, através do YouTube ou até mesmo o Amazon Prime, que por 89 reais no plano anual além das músicas tem frete grátis em alguns produtos, serviço de streaming de vídeo, Twitch e etc. Ou seja, seus gastos podem cair de 200 reais para 0 no melhor cenário ou até mesmo 89 reais -- o que apresenta uma economia de 55.5%.

Mesmo o Spotify tendo sido fundado em 2006, o sistem chegou ao País em 2014. Considerando uma pessoa que tenha uma conta por esses seis anos, pagando um preço médio de 15 reais por mês, ela teria **gastado em torno de 1080 reais** em músicas; caso tivesse escolhido um sistema no qual você prórprio tem a sua versão de um sistema de streaming de música, teria **economizado essa grana ou até mesmo por volta de 600 reais** -- o que já daria para pegar alguns CDs a mais para sua coleção ou até mesmo ir prestigiar ao vivo o cantor que gostas -- e mesmo assim esta economia seria desproporcional por estar usufruindo de mais serviços do Prime neste caso, não apenas músicas.

![49732377608_abec799694_o.jpg](https://cdn.hashnode.com/res/hashnode/image/upload/v1598266234092/Kf0NEUyo8.jpeg)

["FLO Music App"](https://www.flickr.com/photos/94977883@N08/49732377608) by [TheBetterDay](https://www.flickr.com/photos/94977883@N08) is licensed under [CC BY-ND 2.0](https://creativecommons.org/licenses/by-nd/2.0/?ref=ccsearch&atype=rich)

## Koel

A partir do momento que você possuí a mídia e não um serviço de assinatura não precisa se preocupar com o artista que você gosta saindo da plataforma ou até mesmo não estando diponível na plataforma de sua escolha. E por causa dessas e outras o koel pode te ajudar a ter um pouco mais de controle naquilo que gostas de ouvir.

Alguns dos prós da ferramenta:

- Por rodar em um navegador, mesmo celulares antigos vão conseguir rodar com facilidade
- Você não vai precisar se preocupar com instalações e atualizações
- Ocupa menos espaço de armazenamento
- Você pode fazer suas modificações na plataforma para atender melhor suas necessidades
- Por se tratar de um projeto Open Source, suas contribuições podem melhorar a experiência de todos que utilizam ele
- etc

![291443946_6507395535_o.jpg](https://cdn.hashnode.com/res/hashnode/image/upload/v1598275757348/PU8IWY3Ly.jpeg)

["Recording Studios 05/11 - 138"](https://www.flickr.com/photos/84747943@N00/291443946) by [oliverwales.](https://www.flickr.com/photos/84747943@N00) is licensed under [CC BY-ND 2.0](https://creativecommons.org/licenses/by-nd/2.0/?ref=ccsearch&atype=rich)

## Rancher

Caso não conheça o [Rancher](https://rancher.com/), ele é como um "Sistema Operacional" para servidores onde você roda containers, que seriam os seus "apks". Só que uma diferença básica é que eles podem ser atualizados automaticamente e por rodarem de forma isoladas -- um container não necessariamente sabe da existência do outro --, você ganha com segurança da aplicação. Caso queira saber mais:

I. [Configurando Rancher em um ARM](https://fazenda.hashnode.dev/configurando-rancher-em-um-arm)

II. [Nuvem de terceiros quando você pode ter a sua própria em casa com o clique de um botão?](https://fazenda.hashnode.dev/nuvem-de-terceiros-quando-voce-pode-ter-a-sua-propria-em-casa-com-o-clique-de-um-botao)

III. [Banco de dados em casa é 500 vezes mais barato do que na nuvem](https://fazenda.hashnode.dev/banco-de-dados-em-casa-e-500-vezes-mais-barato-do-que-na-nuvem)

E para continuar a série de testes na [Nvidia Jetson Nano](https://developer.nvidia.com/embedded/jetson-nano-developer-kit) -- voltando a citar que é um hardware muito mais do que a tarefa requer, uma Raspberry Pi, Orange Pi, Nanopi e etc. são mais do que suficiente para a tarefa

![46967519174_6fdca22a30_o.jpg](https://cdn.hashnode.com/res/hashnode/image/upload/v1598266425008/Lbr5Vp9fM.jpeg)

["IMG_20190502_142740822"](https://www.flickr.com/photos/23124942@N03/46967519174) by [thomas.amberg](https://www.flickr.com/photos/23124942@N03) is licensed under [CC BY-SA 2.0](https://creativecommons.org/licenses/by-sa/2.0/?ref=ccsearch&atype=rich)

Para ter o seu próprio koel, os seguintes passos serão necessários:

I. Criar o banco de dados:
  1. SSH no seu servidor Rancher
```shell
ssh -l usuarioDoServidor ip.do.seu.rancher
```
  2. Crie uma pasta para o banco de dados do [mariadb](https://hub.docker.com/_/mariadb):
```shell
mkdir -p ~/koel/database
cd ~/koel/database
pwd # salve o output deste comando
```
  3. Mesmo exemplo da imagem do koel utiliza o `mysql:5.7` foi mudado para a versão [mysql/mysql-server:8.0](https://hub.docker.com/r/mysql/mysql-server) para ter suporte em ARM, uma vez que é a versão mínima suportada para a arquitetura:
![image967.png](https://cdn.hashnode.com/res/hashnode/image/upload/v1599693750353/XEdPH1l7w.png)
  4. Coloque as seguintes variáveis de ambiente:
![image955.png](https://cdn.hashnode.com/res/hashnode/image/upload/v1599693773885/1ZEv2k_tD.png)
  5. Monte o caminho do passo `2` -- lembrando que no meu caso é `/home/nvidia/koel` mas no seu pode ser que seja outro:
![image943.png](https://cdn.hashnode.com/res/hashnode/image/upload/v1599693798353/R6hbOPEKe.png)
  6. Clique no canto inferior direito para abrir a opção de `Command` -- cole o seguinte valor `--default-authentication-plugin=mysql_native_password`:
![image931.png](https://cdn.hashnode.com/res/hashnode/image/upload/v1599693826696/9tkKlZouT.png)
  5. Deplyoie a imagem

II. Criar instância do koel:

  1. SSH no seu servidor Rancher:
```shell
ssh -l usuarioDoServidor ip.do.seu.rancher
```
  2. Crie umas pastas para armazenar outros conteúdos como as músicas e as capas de arte delas:
```shell
mkdir -p ~/koel/{music,covers}
cd ~/koel/
pwd # salve o output deste comando
```
  3. Preencha os seguintes valores da imagem -- [fazenda/koel](https://hub.docker.com/r/fazenda/koel) -- e da porta -- lembrando que a `8082` é a que tenho livre no meu servidor mas no seu pode ser que ela já esteja ocupada:
![image1143.png](https://cdn.hashnode.com/res/hashnode/image/upload/v1599694773795/SyP4qjxov.png)
  4. Coloque as seguintes variáveis de ambiente -- caso mude a o nome do container do passo `I` lembre-se de atualizar o seu `DB_HOST` para o nome colocado por você:
![image1131.png](https://cdn.hashnode.com/res/hashnode/image/upload/v1599694792869/rIrNpC8nt.png)
  5. Monte os caminhos do passo `2` -- lembrando que no meu caso é `/home/nvidia/koel` mas no seu pode ser que seja outro:
![image1119.png](https://cdn.hashnode.com/res/hashnode/image/upload/v1599694812701/zmGoRdhQM.png)
  6. Deplyoie a imagem
  7. Logo depois do delpoy, será necessário criar a senha de administrador do serviço. Para tal abra um terminal da imagem:
![image1323.png](https://cdn.hashnode.com/res/hashnode/image/upload/v1599696899490/UxBy9IzWm.png)
  8. Agora digite o seguinte comando `php artisan koel:init` para gerar o usuário e senha do administrador -- só preenchi a senha, para usar os valores padrão apresentados pelo sistema, basta apertar `Enter`:
![image1311.png](https://cdn.hashnode.com/res/hashnode/image/upload/v1599696929650/nGbE8VBJr.png)
  9. Após tudo isso finalizado, só abrir a página do koel e logar com sua conta de administrador criada no passo anterior:
![g1428.png](https://cdn.hashnode.com/res/hashnode/image/upload/v1599696953090/3E_b5FOa0.png)
  10. Pronto, agora é só criar usuários para acessarem o seu sistema e logar em todos os dispositivos que queira :)
![g1419.png](https://cdn.hashnode.com/res/hashnode/image/upload/v1599696968269/66MTzy_yo.png)

A interface o koel é bem intuitiva e fácil de usar, não precisei utilizar nenhum tipo de documentação ou coisa do tipo. Caso precise, recomendo ler o site deles.

## PWA

Progressive Web Apps (PWA) como já mostrados [neste](https://fazenda.hashnode.dev/site-de-analise-de-dados-mas-na-verdade-e-um-app-no-android-windows-mac-e-no-seu-iphone) post são sites que possuem a habilidade de se transformarem em apps seja no seu tablet, celular ou até mesmo computador. Alguns exemplos de serviços grandes que utilizam tal tecnologia são:

- Twitter
- Telegram
- Uber
- Starbucks
- etc

E o koel também. Ou seja, você tem um site e um app ao mesmo tempo do mesmo serviço como mostrado aqui em um Samsung S8+:

%[https://giphy.com/embed/f6tP3WtwbdbBhbLnFh]

E no Mac configurado de forma similar:

![Screen Shot 2020-09-09 at 21.46.48.png](https://cdn.hashnode.com/res/hashnode/image/upload/v1599699055250/QqMEqxxCG.png)

O sistema funciona também em Linux e Windows.

## FTP client

Caso você já possua uma biblioteca de anos de músicas no seu PC, talvez transferir suas músicas por File Transfer Protocol (FTP) seja uma maneira mais prática para transferir o conteúdo para o seu novo serviço -- ou até mesmo plugar um HD externo com as músicas na plaquinha.

Para configurar seu servidor FTP na plaquinha, basta seguir [este](https://www.techrepublic.com/article/how-to-quickly-setup-an-ftp-server-on-ubuntu-18-04/) tutorial e, uma vez configurado, basta abrir a tela do seu gerenciador de arquivos e se conectar à pasta de músicas do koel e transferir elas.

![3361448086_63af9a20c5_o.jpg](https://cdn.hashnode.com/res/hashnode/image/upload/v1598294157569/v2diRbT10.jpeg)

["i too am a fan of file transfer protocol"](https://www.flickr.com/photos/56412930@N00/3361448086) by [jamelah](https://www.flickr.com/photos/56412930@N00) is licensed under [CC BY-NC-ND 2.0](https://creativecommons.org/licenses/by-nc-nd/2.0/?ref=ccsearch&atype=rich)

## Em suma I

Uma nota que quase saíria como "post-scriptum" (PS) é esta de agora que tive ao conversar com uma amiga: durante as pandemia muitos shows, festivais e até mesmo as 'festas das frutas' foram canceladas, que eram como o artistas tiravam boa parte dos sustento deles uma vez que DVDs, CDs e streaming eles não ganham muito. O próprio YouTube que, durante muitos anos, foi a plataforma de streaming de música e continua sendo o segundo site de pesquisa mais utilizado do mundo -- perdendo apenas para o Google em si --, pega 45% do valor da propaganda de cada ad-sense, depois disso ainda tem a produtora, distribuidora, pagar patentes e etc antes do artista receber a parte dele. Se for um artista que produz covers? As vez o vídeo dele pode ser que nem montetizado seja.

![16231391604_107c74ab11_o.jpg](https://cdn.hashnode.com/res/hashnode/image/upload/v1599690480346/V0HK0Q803.jpeg)

 ["an old woman begging in the market Nhattao. Saigon March 18, 2015"](https://www.flickr.com/photos/68109941@N03/16231391604) by [CiaoHo](https://www.flickr.com/photos/68109941@N03) is licensed under [CC BY 2.0](https://creativecommons.org/licenses/by/2.0/?ref=ccsearch&atype=rich)

## Em suma II

Lembrando que por se tratar de uma versão 4.0 que está em beta e a imagem não ser oficial e, além disso, não ter versões, pode ser que encontre muitos problemas durante o seu uso; caso isto ocorra, por favor procure reportar para o mantenedores do projeto -- quem sabe até você mesmo ajudar eles à resolverem isto.

Caso deseje subir este sistema para usar, por favor considere contribuir com o projeto, seja da maneira que achar melhor:

- Documentação
- Testes
- Código
- Financeiramente
- etc.

Este apelo vem porque o koel não é um projeto grande como os já escritos anteriormente; então toda e qualquer ajuda pode e, muito provavelmente, irá ajudar o projeto a florescer. Além de como já comentado você poder contribuir mais diretamente pros produtores de conteúdo que você mais consome através de plataformas como Patreon, Padrim, OnlyFans e etc.

Outro texto sobre como fazer o mesmo para vídeos está sendo produzido, em um futuro uma análise de gastos e do processo de como fazer o mesmo para a séries, filmes, animes e etc será publicado.

![3605234342_1f967cb39a_o.jpg](https://cdn.hashnode.com/res/hashnode/image/upload/v1598266671335/X2nNo4BI4.jpeg)

["Headphones"](https://www.flickr.com/photos/38451115@N04/3605234342) by [pasukaru76](https://www.flickr.com/photos/38451115@N04) is marked with [CC0 1.0](https://creativecommons.org/licenses/cc0/1.0/?ref=ccsearch&atype=rich)

## Apêndice

- Caso seu servidor reinicie por falta de energia ou algo do tipo e você tente logar logo em seguida mas não consiga, não se preocupe porque o banco de dados demora as vezes para iniciar; pior cenário rode o passo de `II.7` para forçar o sistema a sincronizar -- não será gerado um novo usuário administrador nem nada do tipo.
- Altamente recomendo usar o client de FTP uma vez que eu acredito que não consegui subir minhas músicas pela interface do Koel porque uso muitos bloqueadores de conteúdos e acho que um deles estava interferindo nisto
- [Neste](https://youtu.be/w8Il1y1hTFc) vídeo é mostrado como mesmo artistas utilizam os serviços de streamings mais para divulgar o seu trabalho do que fonte de renda em si, uma vez que mesmo os artistas grandes não ganham muito com tais plataformas mas sim com seus shows
- Caso queira saber mais o que é a web "3.0" e como ela vai mudar muito a web atual, [este](https://medium.com/@essentia1/why-the-net-giants-are-worried-about-the-web-3-0-44b2d3620da5) decorre um pouco mais sobre isto
- Um "mini documentário" interessante sobre a briga de vinil vs digital está disponível [aqui](https://youtu.be/lzRvSWPZQYk) para consumo aberto no YouTube
- [Este](https://github.com/Hyzual/docker-koel/issues/8) issue ajudou a descobrir como gerar a senha de administrador do koel
- [Este](https://github.com/laravel/framework/issues/23961#issuecomment-443435814) comentário ajudou a fazer rodar a versão mais recente com mysql com o sistema

## Referências

- [Apple to be formally investigated over Spotify’s antitrust complaint, says report](https://www.theverge.com/2019/5/6/18530894/apple-music-monopoly-spotify-app-store-europe)
- [docker-koel](https://github.com/Hyzual/docker-koel)
- [Serviço de música online Spotify chega ao Brasil por US$ 6 ao mês](http://g1.globo.com/tecnologia/noticia/2014/05/servico-de-musica-online-spotfy-chega-ao-brasil-por-us-6-ao-mes.html)
- [YouTube's Copyright System Isn't Broken. The World's Is.](https://www.youtube.com/watch?v=1Jwo5qc78QU)
- [WRONG About App Store — Apple vs. Anti-Trust](https://www.youtube.com/watch?v=PXKwGDHyF7w)
